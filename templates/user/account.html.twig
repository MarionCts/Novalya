{% extends 'base.html.twig' %}

{% block title %}Novalya |
	{{ 'account.pageTitle'|trans }}
{% endblock %}

{% block body %}

	<main class="admin-pages__container px-100">

		<h1 class="title title__secondary mb-55">{{ 'account.hello'|trans }}
			<span class="title title__secondary accent">{{ app.user.firstName }}</span>
		</h1>
		<div class="control-template account">
			<aside class="control-template__aside">
				<nav class="control-template__panel" aria-labelledby="admin-panel">
					<ul>
						<li>
							<button id="account-dropdown" class="control-template__panel--dropdown panel__titles" aria-expanded="true" aria-controls="dropdown-menu">{{ 'account.accountTitle'|trans }}
								<svg id="account-icon-open" class="dropdown-icon hidden" width="18" height="15" viewbox="0 0 18 15" fill="none" xmlns="http://www.w3.org/2000/svg">
									<path fill-rule="evenodd" clip-rule="evenodd" d="M16.7576 4.69771C16.3032 4.24392 15.5711 4.24871 15.1225 4.70839L9.00806 10.9738L2.89358 4.70839C2.44496 4.24871 1.71288 4.24392 1.25847 4.69771C0.804028 5.1515 0.79928 5.892 1.2479 6.35168L8.18524 13.4602C8.40245 13.6828 8.69882 13.8082 9.00806 13.8082C9.31725 13.8082 9.61363 13.6828 9.83088 13.4602L16.7682 6.35168C17.2168 5.892 17.212 5.1515 16.7576 4.69771Z"/>
								</svg>
								<svg id="account-icon-close" class="dropdown-icon" width="18" height="15" viewbox="0 0 18 15" fill="none" xmlns="http://www.w3.org/2000/svg">
									<path fill-rule="evenodd" clip-rule="evenodd" d="M16.7576 10.3023C16.3032 10.7561 15.5711 10.7513 15.1225 10.2916L9.00806 4.02623L2.89358 10.2916C2.44496 10.7513 1.71288 10.7561 1.25847 10.3023C0.804028 9.8485 0.79928 9.108 1.2479 8.64832L8.18524 1.53976C8.40245 1.31716 8.69882 1.19184 9.00806 1.19184C9.31725 1.19184 9.61363 1.31716 9.83088 1.53976L16.7682 8.64832C17.2168 9.108 17.212 9.8485 16.7576 10.3023Z"/>
								</svg>
							</button>
							<ul id="account-dropdown-menu" class="dropdown__menu opens">
								<li>
									<a href="#update-account" id="info-btn" class="paragraph__small">{{ 'account.manageInfos'|trans }}</a>
								</li>
								<li>
									<a href="#delete-account" id="delete-btn" class="paragraph__small">{{ 'account.deleteAccount'|trans }}</a>
								</li>
							</ul>
						</li>
						<li>
							<button id="favorites-dropdown" class="control-template__panel--dropdown panel__titles" aria-expanded="false" aria-controls="dropdown-menu">{{ 'account.favoriteTitle'|trans }}
								<svg id="favorites-icon-open" class="dropdown-icon" width="18" height="15" viewbox="0 0 18 15" fill="none" xmlns="http://www.w3.org/2000/svg">
									<path fill-rule="evenodd" clip-rule="evenodd" d="M16.7576 4.69771C16.3032 4.24392 15.5711 4.24871 15.1225 4.70839L9.00806 10.9738L2.89358 4.70839C2.44496 4.24871 1.71288 4.24392 1.25847 4.69771C0.804028 5.1515 0.79928 5.892 1.2479 6.35168L8.18524 13.4602C8.40245 13.6828 8.69882 13.8082 9.00806 13.8082C9.31725 13.8082 9.61363 13.6828 9.83088 13.4602L16.7682 6.35168C17.2168 5.892 17.212 5.1515 16.7576 4.69771Z"/>
								</svg>
								<svg id="favorites-icon-close" class="dropdown-icon hidden" width="18" height="15" viewbox="0 0 18 15" fill="none" xmlns="http://www.w3.org/2000/svg">
									<path fill-rule="evenodd" clip-rule="evenodd" d="M16.7576 10.3023C16.3032 10.7561 15.5711 10.7513 15.1225 10.2916L9.00806 4.02623L2.89358 10.2916C2.44496 10.7513 1.71288 10.7561 1.25847 10.3023C0.804028 9.8485 0.79928 9.108 1.2479 8.64832L8.18524 1.53976C8.40245 1.31716 8.69882 1.19184 9.00806 1.19184C9.31725 1.19184 9.61363 1.31716 9.83088 1.53976L16.7682 8.64832C17.2168 9.108 17.212 9.8485 16.7576 10.3023Z"/>
								</svg>
							</button>
							<ul id="favorites-dropdown-menu" class="dropdown__menu">
								<li>
									<a href="#view-favorites" id="favorite-btn" class="paragraph__small">{{ 'account.viewFavorites'|trans }}</a>
								</li>
							</ul>
						</li>
						<li class="mt-35">
							<a href="{{ path('app_logout') }}" class="paragraph__small">{{ 'account.logout'|trans }}</a>
						</li>
					</ul>

				</nav>
			</aside>

			{# ACCOUNT INFORMATION #}
			<section id="account-info" class="account__main">
				<h2 class="title title__tertiary center">{{ 'account.informationTitle'|trans }}
				</h2>

				<div class="edit__container">
					{{ form_start(form) }}

					{{ form_label(form.name) }}
					{{ form_widget(form.name) }}
					{% for error in form.name.vars.errors %}
						<div class="form__constraint">{{ error.message }}</div>
					{% endfor %}

					{{ form_label(form.firstName) }}
					{{ form_widget(form.firstName) }}
					{% for error in form.firstName.vars.errors %}
						<div class="form__constraint">{{ error.message }}</div>
					{% endfor %}

					{{ form_label(form.email) }}
					{{ form_widget(form.email) }}
					{% for error in form.email.vars.errors %}
						<div class="form__constraint">{{ error.message }}</div>
					{% endfor %}

					{{ form_label(form.password) }}
					{{ form_widget(form.password) }}
					{% for error in form.password.vars.errors %}
						<div class="form__constraint">{{ error.message }}</div>
					{% endfor %}

					<button class="button button__primary">{{ 'updateBtn'|trans }}</button>

					{{ form_end(form) }}
				</div>

			</section>

			{# DELETE ACCOUNT SECTION #}
			<section id="account-delete" class="account__main hidden">
				<h2 class="title title__tertiary center">{{ 'account.deleteTitle'|trans }}
				</h2>

				<div>
					<p>{{ 'account.deleteMessage'|trans }}</p>
					<form method="post" action="{{ path('app_user_account_deactivate', {'id': user.id}) }}" onsubmit="return confirm('Are you sure you want to delete this item?');">
						<input type="hidden" name="_token" value="{{ csrf_token('deactivate' ~ user.id) }}">
						<button class="button button__delete">{{ 'deleteBtn'|trans }}</button>
					</form>
				</div>
			</section>

			{# ACCOUNT FAVORITES #}
			<section id="favorites" class="account__main hidden">

				<h2 class="title title__tertiary center">{{ 'account.favoriteTitle'|trans }}
				</h2>

				<div class="favorite__container">
					{% for property in properties %}
						<p>{{ property.name }}</p>
					{% endfor %}
				</div>

			</section>

		</div>


	</main>
{% endblock %}
